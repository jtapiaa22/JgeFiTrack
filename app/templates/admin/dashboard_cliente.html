{% extends "base.html" %}
{% block contenido %}
<div class="container mt-4">
  <h2 class="text-primary fw-bold mb-3">
    <i class="bi bi-person-badge"></i> Cliente: {{ cliente.nombre }}
  </h2>

  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="card-title mb-3">Resumen del Cliente</h5>
      <p><strong>Total de alumnos:</strong> {{ total_alumnos }}</p>
      <p><strong>Total de mediciones:</strong> {{ total_mediciones }}</p>
      <a href="{{ url_for('admin.editar_cliente', cliente_id=cliente.id) }}" class="btn btn-warning btn-sm">
        <i class="bi bi-pencil-square"></i> Editar Cliente
      </a>
      <form action="{{ url_for('admin.eliminar_cliente', cliente_id=cliente.id) }}" method="POST" class="d-inline">
        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('¿Eliminar este cliente?')">
          <i class="bi bi-trash"></i> Eliminar
        </button>
      </form>
    </div>
  </div>

  <h4 class="mb-3"><i class="bi bi-people"></i> Alumnos Asociados</h4>
  {% if alumnos %}
    <table class="table table-striped align-middle shadow-sm">
      <thead class="table-primary">
        <tr>
          <th>Nombre</th>
          <th>Edad</th>
          <th>Género</th>
          <th>Total Mediciones</th>
        </tr>
      </thead>
      <tbody>
        {% for a in alumnos %}
          <tr>
            <td>{{ a.nombre }}</td>
            <td>{{ a.edad }}</td>
            <td>{{ a.genero }}</td>
            <td>{{ a.mediciones|length }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">Este cliente aún no tiene alumnos registrados.</p>
  {% endif %}
</div>
{% endblock %}
